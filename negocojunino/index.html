<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Jogo da Memoria</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
</head>

<style>
    /* This container is needed to position the front and back side */
    .flip-card-inner {
        position: relative;
        width: 10rem;
        height: 10rem;
        text-align: center;
        transition: transform 0.8s;
        transform-style: preserve-3d;
    }

    /* Do an horizontal flip when you move the mouse over the flip box container */
    .flip {
        transform: rotateY(180deg);
    }

    /* Position the front and back side */
    .flip-card-front,
    .flip-card-back {
        position: absolute;
        width: 100%;
        height: 100%;
        -webkit-backface-visibility: hidden;
        /* Safari */
        backface-visibility: hidden;
    }

    /* Style the front side (fallback if image is missing) */
    .flip-card-front {
        background-color: #bbb;
        color: black;
        width: 10rem;
        height: 10rem;
    }

    /* Style the back side */
    .flip-card-back {
        background-color: dodgerblue;
        color: white;
        transform: rotateY(180deg);
    }
</style>

<style>
    /* CSS media query dentro de um stylesheet */
    .ContainerPai {
        max-width: 50%
    }

    .Ativo {
        visibility: visible;
    }

    .Desativo {
        transform: rotateY(180deg);
    }

    .Inclicavel {
        pointer-events: none;
    }

    @media (max-width: 992px) {
        .ContainerPai {
            max-width: 97%
        }
    }
</style>

<body class="d-flex flex-column min-vh-100 justify-content-center align-items-center"
    style="background-image: url(https://www.rioquente.com.br/images/news/0315/festa_junina_2_1.jpg); background-size: cover; background-repeat: no-repeat;">

    <strong class="text-center mb-5 mt-4 display-2 text-light">Jogo da Memoria</strong>

    <!--background-color: #f8f8f8;-->
    <div class="container row p-5 rounded-4 ContainerPai" style="min-height: 60vh; background-color: #f8f8f8;">

        <!--Imagens-->

        <div class="col" style="min-height: 30rem;">
            <div class="row row-cols-3 row-cols-lg-6 gap-3 justify-content-center align-items-center mb-3">


                <div class="flip-card-inner col p-0 Ativo" style="cursor: pointer;" onclick="SelecionarItem(this)"
                    data-codigo="1">
                    <div class="flip-card-front rounded-3 bg-dark">

                    </div>
                    <div class="flip-card-back">
                        <img src="https://terramagna.com.br/wp-content/uploads/2022/05/espiga-milho-barba-palha.png"
                            style="width: 10rem; height: 10rem;" class="img-fluid rounded-3" />
                    </div>
                </div>


                <div class="flip-card-inner col p-0 Ativo" style="cursor: pointer;" onclick="SelecionarItem(this)"
                    data-codigo="6">
                    <div class="flip-card-front rounded-3 bg-dark">

                    </div>
                    <div class="flip-card-back">
                        <img src="https://i.pinimg.com/originals/a6/c7/e6/a6c7e6a9d641ccf2d91162adf3f44ff0.png"
                            style="width: 10rem; height: 10rem;" class="img-fluid rounded-3" />
                    </div>
                </div>



                <div class="flip-card-inner col p-0 Ativo" style="cursor: pointer;" onclick="SelecionarItem(this)"
                    data-codigo="5">
                    <div class="flip-card-front rounded-3 bg-secondary">

                    </div>
                    <div class="flip-card-b ack">
                        <img src="https://s2.glbimg.com/Ujilx_0IygALp1Iv-xpr1f4UgTWEUe7ibbVE67VzTIBIoz-HdGixxa_8qOZvMp3w/s.glbimg.com/jo/g1/f/original/2012/06/02/untitled-5_copy.jpg"
                            style="width: 10rem; height: 10rem;" class="img-fluid rounded-3" />
                    </div>
                </div>


                <div class="flip-card-inner col p-0 Ativo" style="cursor: pointer;" onclick="SelecionarItem(this)"
                    data-codigo="2">
                    <div class="flip-card-front rounded-3 bg-primary">

                    </div>
                    <div class="flip-card-back">
                        <img src="https://conteudo.imguol.com.br/4b/2016/12/09/cuscuz-nordestino-1481308190596_v2_1x1.jpg"
                            style="width: 10rem; height: 10rem;" class="img-fluid rounded-3" />
                    </div>
                </div>

                <div class="flip-card-inner col p-0 Ativo" style="cursor: pointer;" onclick="SelecionarItem(this)"
                    data-codigo="3">
                    <div class="flip-card-front rounded-3 bg-secondary">

                    </div>
                    <div class="flip-card-back">
                        <img src="https://s2-g1.glbimg.com/YgviWaNAkPUtp1Dt_AX3T-5aahY=/0x0:626x416/984x0/smart/filters:strip_icc()/i.s3.glbimg.com/v1/AUTH_59edd422c0c84a879bd37670ae4f538a/internal_photos/bs/2020/4/F/HNNOQPStS2pAgxlDl15A/queima-fogueiras-garanhuns.jpeg"
                            style="width: 10rem; height: 10rem;" class="img-fluid rounded-3" />
                    </div>
                </div>

                <div class="flip-card-inner col p-0 Ativo" style="cursor: pointer;" onclick="SelecionarItem(this)"
                    data-codigo="4">
                    <div class="flip-card-front rounded-3 bg-success">

                    </div>
                    <div class="flip-card-back">
                        <img src="https://i.pinimg.com/originals/11/1f/67/111f67e90cef4c1bdbf200530396580d.png"
                            style="width: 10rem; height: 10rem;" class="img-fluid rounded-3" />
                    </div>
                </div>

                <div class="flip-card-inner col p-0 Ativo" style="cursor: pointer;" onclick="SelecionarItem(this)"
                    data-codigo="6">
                    <div class="flip-card-front rounded-3 bg-secondary">

                    </div>
                    <div class="flip-card-back">
                        <img src="https://i.pinimg.com/originals/a6/c7/e6/a6c7e6a9d641ccf2d91162adf3f44ff0.png"
                            style="width: 10rem; height: 10rem;" class="img-fluid rounded-3" />
                    </div>
                </div>

                <div class="flip-card-inner col p-0 Ativo" style="cursor: pointer;" onclick="SelecionarItem(this)"
                    data-codigo="5">
                    <div class="flip-card-front rounded-3 bg-success">

                    </div>
                    <div class="flip-card-back">
                        <img src="https://s2.glbimg.com/Ujilx_0IygALp1Iv-xpr1f4UgTWEUe7ibbVE67VzTIBIoz-HdGixxa_8qOZvMp3w/s.glbimg.com/jo/g1/f/original/2012/06/02/untitled-5_copy.jpg"
                            style="width: 10rem; height: 10rem;" class="img-fluid rounded-3" />
                    </div>
                </div>

                <div class="flip-card-inner col p-0 Ativo" style="cursor: pointer;" onclick="SelecionarItem(this)"
                    data-codigo="7">
                    <div class="flip-card-front rounded-3 bg-secondary">

                    </div>
                    <div class="flip-card-back">
                        <img src="https://www.festajunina.com.br/wp-content/uploads/2017/03/Canjica-Tradicional.jpg"
                            style="width: 10rem; height: 10rem;" class="img-fluid rounded-3" />
                    </div>
                </div>

                <div class="flip-card-inner col p-0 Ativo" style="cursor: pointer;" onclick="SelecionarItem(this)"
                    data-codigo="1">
                    <div class="flip-card-front rounded-3 bg-success">

                    </div>
                    <div class="flip-card-back">
                        <img src="https://terramagna.com.br/wp-content/uploads/2022/05/espiga-milho-barba-palha.png"
                            style="width: 10rem; height: 10rem;" class="img-fluid rounded-3" />
                    </div>
                </div>


                <div class="flip-card-inner col p-0 Ativo" style="cursor: pointer;" onclick="SelecionarItem(this)"
                    data-codigo="4">
                    <div class="flip-card-front rounded-3 bg-secondary">

                    </div>
                    <div class="flip-card-back">
                        <img src="https://i.pinimg.com/originals/11/1f/67/111f67e90cef4c1bdbf200530396580d.png"
                            style="width: 10rem; height: 10rem;" class="img-fluid rounded-3" />
                    </div>
                </div>

                <div class="flip-card-inner col p-0 Ativo" style="cursor: pointer;" onclick="SelecionarItem(this)"
                    data-codigo="3">
                    <div class="flip-card-front rounded-3 bg-success">

                    </div>
                    <div class="flip-card-back">
                        <img src="https://s2-g1.glbimg.com/YgviWaNAkPUtp1Dt_AX3T-5aahY=/0x0:626x416/984x0/smart/filters:strip_icc()/i.s3.glbimg.com/v1/AUTH_59edd422c0c84a879bd37670ae4f538a/internal_photos/bs/2020/4/F/HNNOQPStS2pAgxlDl15A/queima-fogueiras-garanhuns.jpeg"
                            style="width: 10rem; height: 10rem;" class="img-fluid rounded-3" />
                    </div>
                </div>

                <div class="flip-card-inner col p-0 Ativo" style="cursor: pointer;" onclick="SelecionarItem(this)"
                    data-codigo="8">
                    <div class="flip-card-front rounded-3 bg-secondary">

                    </div>
                    <div class="flip-card-back">
                        <img src="https://s2.glbimg.com/ESF3OA5IJAsG8LoWmm_Di6AWUPI=/e.glbimg.com/og/ed/f/original/2021/06/11/rolhaaa.jpeg"
                            style="width: 10rem; height: 10rem;" class="img-fluid rounded-3" />
                    </div>
                </div>

                <div class="flip-card-inner col p-0 Ativo" style="cursor: pointer;" onclick="SelecionarItem(this)"
                    data-codigo="7">
                    <div class="flip-card-front rounded-3 bg-success">

                    </div>
                    <div class="flip-card-back">
                        <img src="https://www.festajunina.com.br/wp-content/uploads/2017/03/Canjica-Tradicional.jpg"
                            style="width: 10rem; height: 10rem;" class="img-fluid rounded-3" />
                    </div>
                </div>

                <div class="flip-card-inner col p-0 Ativo" style="cursor: pointer;" onclick="SelecionarItem(this)"
                    data-codigo="2">
                    <div class="flip-card-front rounded-3 bg-secondary">

                    </div>
                    <div class="flip-card-back">
                        <img src="https://conteudo.imguol.com.br/4b/2016/12/09/cuscuz-nordestino-1481308190596_v2_1x1.jpg"
                            style="width: 10rem; height: 10rem;" class="img-fluid rounded-3" />
                    </div>
                </div>

                <div class="flip-card-inner col p-0 Ativo" style="cursor: pointer;" onclick="SelecionarItem(this)"
                    data-codigo="8">
                    <div class="flip-card-front rounded-3 bg-secondary">

                    </div>
                    <div class="flip-card-back">
                        <img src="https://s2.glbimg.com/ESF3OA5IJAsG8LoWmm_Di6AWUPI=/e.glbimg.com/og/ed/f/original/2021/06/11/rolhaaa.jpeg"
                            style="width: 10rem; height: 10rem;" class="img-fluid rounded-3" />
                    </div>
                </div>



            </div>
        </div>
        <!--Options-->
        <div class="container d-flex justify-content-between flex-column flex-lg-row gap-3 align-items-center p-3 rounded-4"
            style="background-color: #ffff; ">

            <!--Tempo-->
            <strong id="Tempo" style="font-size: 1.5rem;">
                Tempo: 00:00
            </strong>

            <!--Tentativas-->
            <strong id="Tentativas" style="font-size: 1.5rem;">
                Tentativas: 0
            </strong>

            <!--Butão Para Reiniciar/Iniciar-->
            <div id="comecarReiniciar" class="bg-light">
                <button onclick="começar(this)" class="btn btn-outline-success">começar</button>
            </div>

        </div>
    </div>

    <!-- Modal Vitoria-->
    <div class="modal fade" id="staticBackdrop" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1"
        aria-labelledby="staticBackdropLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h1 class="modal-title fs-5" id="staticBackdropLabel">Parabéns!!!!</h1>
                    <button type="button" class="btn-close" onclick="reset()" data-bs-dismiss="modal"
                        aria-label="Close"></button>
                </div>
                <strong class="modal-body" style="font-size: 13pt;">
                    Ganhou
                </strong>
            </div>
        </div>
    </div>

    <!-- Modal Derrota-->
    <div class="modal fade" id="staticBackdrop2" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1"
        aria-labelledby="staticBackdropLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h1 class="modal-title fs-5" id="staticBackdropLabel">Que Pena, Tente Novamente!</h1>
                    <button type="button" onclick="reset()" class="btn-close" data-bs-dismiss="modal"
                        aria-label="Close"></button>
                </div>
                <strong class="modal-body" style="font-size: 13pt;">
                    Perdeu, Burro
                </strong>
            </div>
        </div>
    </div>

    <script>

        function começar(target) {
            var dados = document.querySelectorAll('.Ativo')
            target.remove()
            document.getElementById('comecarReiniciar').innerHTML = `<button onclick="btnReset(this)" class="btn btn-outline-secondary">reiniciar</button>`
            dados.forEach(element => {
                element.classList.add('flip')
            });
            iniciarCronometro()
            setTimeout(() => {
                dados.forEach(element => {
                    element.classList.remove('flip')
                });
            }, "2000");
        }

        function btnReset(target) {
            reset()
            target.remove()
            document.getElementById('comecarReiniciar').innerHTML = `<button onclick="começar(this)" class="btn btn-outline-success">começar</button>`
        }

        localStorage.setItem("ValorAnterior", null);
        localStorage.setItem("Tentativas", 0)


        let minutos = 0;
        let segundos = 0;
        let cronometro;
        function atualizarCronometro() {
            segundos++;
            if (segundos == 60) {
                segundos = 0;
                minutos++;
            }

            let minutosFormatados = minutos < 10 ? `0${minutos}` : minutos;
            let segundosFormatados = segundos < 10 ? `0${segundos}` : segundos;

            document.getElementById('Tempo').textContent = `Tempo: ${minutosFormatados}:${segundosFormatados}`;
        }

        function iniciarCronometro() {
            if (!cronometro) {
                cronometro = setInterval(atualizarCronometro, 1000);
            }
        }

        function pararCronometro() {
            clearInterval(cronometro);
            cronometro = null;
        }

        function reiniciarCronometro() {
            pararCronometro();
            minutos = 0;
            segundos = 0;
        }

        window.addEventListener('beforeunload', () => {
            pararCronometro();
        });

        function SelecionarItem(element) {
            element.classList.add('flip');
            setTimeout(() => {
                var value = element.getAttribute('data-codigo')
                var ValorAnterior = localStorage.getItem("ValorAnterior")
                if (ValorAnterior == 'null') {
                    element.classList.add('Inclicavel')
                    if (!cronometro) {
                        iniciarCronometro()
                    }
                    localStorage.setItem("ValorAnterior", value);
                } else {
                    if (value == ValorAnterior) {
                        var Results = document.querySelectorAll(`[data-codigo="${value}"]`)
                        Results.forEach(target => {
                            target.classList.add('Desativo');
                            target.classList.remove('Ativo');
                            target.classList.remove('flip');
                        });
                        localStorage.setItem("ValorAnterior", null);
                        CheckFinalizar()
                    } else {

                        var Tentativas = parseInt(localStorage.getItem('Tentativas'))
                        CheckDerrota(Tentativas)
                        localStorage.setItem('Tentativas', (Tentativas + 1))
                        document.querySelector('#Tentativas').innerHTML = `Tentativas: ${Tentativas + 1}`
                        var Results = document.querySelectorAll(`[data-codigo="${ValorAnterior}"]`)
                        Results.forEach(target => {
                            target.classList.remove('Inclicavel');
                            target.classList.remove('flip');
                            element.classList.remove('flip');
                        });
                        element.classList.remove('Inclicavel')
                        localStorage.setItem("ValorAnterior", null);
                    }
                }
            }, "800");

        }

        function reset() {
            document.getElementById('Tentativas').innerHTML = 'Tentativas: 0'
            document.getElementById('Tempo').innerHTML = 'Tempo: 00:00'
            localStorage.setItem("ValorAnterior", null);
            reiniciarCronometro()
            localStorage.setItem("Tentativas", 0)
            var Results = document.querySelectorAll(`[data-codigo]`)
            Results.forEach(target => {
                target.classList.remove('Desativo');
                target.classList.remove('Inclicavel');
                target.classList.add('Ativo');
            });
        }

        function CheckFinalizar() {
            setTimeout(() => {
                var Total = document.querySelectorAll('.Ativo')
                if (Total.length == 0) {
                    pararCronometro()
                    const myModal = new bootstrap.Modal(document.getElementById('staticBackdrop'));
                    myModal.show();
                }
            }, "500");
        }

        function CheckDerrota(qtdErros) {
            if (qtdErros >= 4) {
                pararCronometro()
                const myModal = new bootstrap.Modal(document.getElementById('staticBackdrop2'));
                myModal.show();
            }
        }



    </script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
        crossorigin="anonymous"></script>
</body>

</html>